<html>
	<head>
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">	
		<script src="https://code.jquery.com/jquery-3.1.1.min.js">
		<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
		<style>
			.entry:not(:first-of-type)
			{
				margin-top: 10px;
			}
			.glyphicon
			{
				font-size: 12px;
			}

			table {
			  width: 100%;
			}

			table, th, td {
			  border: 1px solid black;
			}
		</style>
	</head>
	<body>
		<div class="container">
			<div class="row">
				<h1>Lab Events Table</h1>
			</div>
			<div class="row">
				<label class="control-label" for="ourField"></label>
				<form role="form" id ="myForm" class="form-inline">
     					<div id="myRepeatingFields">
         					<div class="entry inline-form col-xs-12">
               				 	<label for="Profession">Column Value : </label>
						        <select name="fields" class="form-control">
						        	<option value="value">value</option>
						            <option value="valuenum">valuenum</option>
						            <!--<option value="Column 3">Column 3</option>-->
						            <!--<option value="Column 4">Column 4</option>-->
						            <!--<option value="Column 5">Column 5</option>-->
						        </select>
						        <label for="Profession">Logical Operation : </label>
                				<select name="fields2" class="form-control">
						        	<option value="=">Equal</option>
						            <option value=">=">Greater than Or Equal To</option>
						            <option value="<=">Less Than Or Equal To</option>
						        </select>						        
						        <label for="Profession">Value : </label>
                				<input class="form-control" name="fields3" type="text" placeholder="Placeholder" />
						        <label for="Profession">Logical Operation : </label>
                				<select name="fields4[]" class="form-control">
						        	<option value=" ">No Value</option>
						            <option value="And">And</option>
						            <option value="Or">Or</option>
						        </select>  
                				<button type="button" class="btn btn-success btn-lg btn-add">
                    				<span class="glyphicon glyphicon-plus" aria-hidden="true"></span>
                				</button>
           					</div>
      					</div> 
                		<button type="button" class="btn btn-success btn-lg btn-show">Submit</button>
 					</form>					
				<br>
				<small>Press <span class="glyphicon glyphicon-plus gs"></span> for another field</small>
			</div>
			<br><br>
			<table id="myTable">
				<tr>
					<th id="ROW_ID">ROW_ID</th>
					<th id="PERSON_ID">PERSON_ID</th>
					<th id="ENCOUNTER_ID">ENCOUNTER_ID</th>
					<th id="CONTRIBUTOR_SYSTEM">CONTRIBUTOR_SYSTEM</th>
					<th id="CHARTTIME">CHARTTIME</th>
					<th id="VALUE">Value</th>
					<th id="VALUENUM">VALUENUM</th>
					<th id="VALUEUOM">VALUEUOM</th>
					<th id="NORMAL_LOW">NORMAL_LOW</th>
					<th id="NORMAL_HIGH">NORMAL_HIGH</th>
					<th id="FLAG">FLAG</th>
				</tr>
			</table>
			<br>
		</div>
		
		<script>
			$(function()
			{
				
				$(document).on('click', '.btn-add', function(e)
				{
					e.preventDefault();
					var controlForm = $('#myRepeatingFields:first'),
						currentEntry = $(this).parents('.entry:first'),
						newEntry = $(currentEntry.clone()).appendTo(controlForm);
					newEntry.find('input').val('');
					controlForm.find('.entry:not(:last) .btn-add')
						.removeClass('btn-add').addClass('btn-remove')
						.removeClass('btn-success').addClass('btn-danger')
						.html('<span class="glyphicon glyphicon-minus"></span>');
				}).on('click', '.btn-remove', function(e)
				{
					e.preventDefault();
					$(this).parents('.entry:first').remove();
					return false;
				});
				$(document).on('click', '.btn-show', function()
				{
					var x = document.getElementById("myForm").elements.length;
					//document.getElementById("demo").innerHTML = "Found " + x + " elements in the form.";
					var i;
					var z;
					var arr = [];
					var text = "";
					for (i = 0; i < x-1; i++) { 
						z = document.getElementById("myForm").elements[i].value;
						arr[i] = document.getElementById("myForm").elements[i].value;
						text += z + "<br>";
					}
					var search_word ="NEGATIVE";
				    var qurl="/";
				    var js_data = JSON.stringify(arr);	
					$.ajax({    
								url: '/',
								data: js_data,
								type: 'POST',
								dataType : 'json',
								contentType: 'application/json',
								success: function(response) {
									console.log(arr);
								},
								error: function(error) {
									console.log(error);
								}
							}).done(function(data) { 
								console.log(data)
								console.log(data.valueNum)
    							for(var i=0;i<data.length;i++)
							    {	
									var table = document.getElementById("myTable");
									var row = table.insertRow(-1);
									var cell0 = row.insertCell(0);
									var cell1 = row.insertCell(1);
									var cell2 = row.insertCell(2);
									var cell3 = row.insertCell(3);
									var cell4 = row.insertCell(4);
									var cell5 = row.insertCell(5);
									var cell6 = row.insertCell(6);
									var cell7 = row.insertCell(7);
									var cell8 = row.insertCell(8);
									var cell9 = row.insertCell(9);
									var cell10 = row.insertCell(10);
									//var cell11 = row.insertCell(11);									
									cell0.innerHTML = data[i]["ROW_ID"];
									cell1.innerHTML = data[i]["PERSON_ID"];
									cell2.innerHTML = data[i]["ENCOUNTER_ID"];
									cell3.innerHTML = data[i]["CONTRIBUTOR_SYSTEM"];
									cell4.innerHTML = data[i]["CHARTTIME"];
									cell5.innerHTML = data[i]["VALUE"];
									cell6.innerHTML = data[i]["VALUENUM"];
									cell7.innerHTML = data[i]["VALUEUOM"];
									cell8.innerHTML = data[i]["NORMAL_LOW"];
									cell9.innerHTML = data[i]["NORMAL_HIGH"];
									cell10.innerHTML = data[i]["FLAG"];
							    } 
      						});
      						event.preventDefault();
					console.log(arr);			
				});
				
			});
		</script>
		<p id="demo"></p>
		<p id="demo1"></p>
		<div id="div1"> </div>
	</body>
</html>